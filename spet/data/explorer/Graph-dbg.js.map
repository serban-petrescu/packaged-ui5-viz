{"version":3,"sources":["../../../../../src/spet/data/explorer/Graph.js"],"names":["metadata","properties","width","type","defaultValue","height","directed","aggregations","_html","multiple","visibility","nodes","links","associations","origins","_force","_g","_size","init","oHtml","HTML","content","setAggregation","attachAfterRendering","draw","jQuery","sap","delayedCall","checkResize","Device","resize","attachHandler","oSvg","getAggregation","getDomRef","clientHeight","clientWidth","initialize","oZoom","fnTick","select","selectAll","attr","d","source","x","y","target","d3","layout","force","linkDistance","element","getLabel","charge","gravity","on","oG","append","style","Parameters","get","behavior","zoom","call","event","translate","scale","data","mNodes","mVisited","bDirected","getDirected","mGraph","aLinks","getLinks","aRoots","getOrigins","aNodes","getNodes","oResult","fnBfs","aOrigins","aQueue","slice","oCurrent","sCurrent","i","length","getId","shift","getExpanded","push","fnInitialize","map","sRoot","filter","oNode","fnBuildGraph","hasOwnProperty","getSource","getTarget","fnMakeResult","oLinks","oNodes","oArc","svg","arc","innerRadius","outerRadius","startAngle","endAngle","Math","PI","fnStart","oData","size","start","fnLinks","text","oLinkg","enter","getLabelOnly","exit","remove","fnTween","interpolate","t","fnRotate","transition","getBusy","duration","ease","attrTween","each","fnNodes","getTooltip","empty","oNodeg","stopPropagation","defaultPrevented","getExpandable","setExpanded","fireEvent","dom","preventDefault","drag","renderer","oRM","oControl","write","writeControlData","addStyle","getHeight","getWidth","writeStyles","renderControl"],"mappings":"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","file":"Graph.js","sourceRoot":"src","sourcesContent":["import jQuery from \"jquery.sap.global\";\nimport Control from \"sap/ui/core/Control\";\nimport HTML from \"sap/ui/core/HTML\";\nimport Device from \"sap/ui/Device\";\nimport d3 from \"sap/ui/thirdparty/d3\";\nimport Parameters from \"sap/ui/core/theming/Parameters\";\n\n/**\n * Provides a way of displaying a (directed or undirected) graph.\n * @class\n * @name spet.data.explorer.Graph\n * @extends sap.ui.core.Control\n */\nexport default class Graph extends Control {\n\tmetadata = {\n\t\tproperties: {\n\t\t\t/**\n\t\t\t * The width of the graph.\n\t\t\t * @type {sap.ui.core.CSSSize}\n\t\t\t * @default \"100%\"\n\t\t\t * @name spet.data.explorer.Graph#width\n\t\t\t */\n\t\t\twidth: { type: \"sap.ui.core.CSSSize\", defaultValue: \"100%\" },\n\n\t\t\t/**\n\t\t\t * The height of the graph.\n\t\t\t * @type {sap.ui.core.CSSSize}\n\t\t\t * @default \"100%\"\n\t\t\t * @name spet.data.explorer.Graph#height\n\t\t\t */\n\t\t\theight: { type: \"sap.ui.core.CSSSize\", defaultValue: \"100%\" },\n\n\t\t\t/**\n\t\t\t * Flag indicating if the graph edges should be directed.\n\t\t\t * @type {boolean}\n\t\t\t * @default true\n\t\t\t * @name spet.data.explorer.Graph#directed\n\t\t\t */\n\t\t\tdirected: { type: \"boolean\", defaultValue: true }\n\t\t},\n\t\taggregations: {\n\t\t\t/**\n\t\t\t * Inner HTML control for rendering the underlying SVG.\n\t\t\t * @private\n\t\t\t * @type {sap.ui.core.HTML}\n\t\t\t * @name spet.data.explorer.Graph#_html\n\t\t\t */\n\t\t\t_html: { type: \"sap.ui.core.HTML\", multiple: false, visibility: \"hidden\" },\n\n\t\t\t/**\n\t\t\t * Aggregation for hoding the graph's nodes.\n\t\t\t * @type {spet.data.explorer.Node[]}\n\t\t\t * @name spet.data.explorer.Graph#nodes\n\t\t\t */\n\t\t\tnodes: { type: \"spet.data.explorer.Node\", multiple: true },\n\n\t\t\t/**\n\t\t\t * Aggregation for hoding the links between the graph's nodes.\n\t\t\t * @type {spet.data.explorer.Link[]}\n\t\t\t * @name spet.data.explorer.Graph#links\n\t\t\t */\n\t\t\tlinks: { type: \"spet.data.explorer.Link\", multiple: true }\n\t\t},\n\t\tassociations: {\n\t\t\t/**\n\t\t\t * Association for hoding the nodes which should be considered origins (or roots)\n\t\t\t * of the graph. The origin nodes are used when determining which nodes should be\n\t\t\t * displayed (only nodes which are reachable through expanded nodes from an origin\n\t\t\t * are shown).\n\t\t\t * @type {spet.data.explorer.Node[]}\n\t\t\t * @name spet.data.explorer.Graph#origins\n\t\t\t */\n\t\t\torigins: { type: \"spet.data.explorer.Node\", multiple: true }\n\t\t}\n\t}\n\n\t/** The underlying force layout. @private */\n\t_force = null\n\n\t/** The root group of the graph. @private */\n\t_g = null\n\n\t/** The previous size of the screen. @private */\n\t_size = {}\n\n\tinit() {\n\t\tvar oHtml = new HTML({ content: \"<svg style=\\\"height:100%;width:100%\\\"/>\" });\n\t\tthis.setAggregation(\"_html\", oHtml);\n\t\toHtml.attachAfterRendering(() => {\n\t\t\tthis.draw();\n\t\t\tjQuery.sap.delayedCall(200, this, this.checkResize);\n\t\t});\n\t\tDevice.resize.attachHandler(this.checkResize, this);\n\t}\n\n\t/**\n\t * Checks the resizing of the screen and redraws if necessary.\n\t * @protected\n\t * @method spet.data.explorer.Graph#checkResize\n\t * @returns {spet.data.explorer.Graph} this to allow method chaining.\n\t */\n\tcheckResize() {\n\t\tlet oSvg = this.getAggregation(\"_html\").getDomRef();\n\t\tif (oSvg && (this._size.height !== oSvg.clientHeight || this._size.width !== oSvg.clientWidth)) {\n\t\t\tthis.draw();\n\t\t\tjQuery.sap.delayedCall(200, this, this.checkResize);\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Initializes the SVG and the force layout.\n \t * @method spet.data.explorer.Graph#initialize\n\t * @private\n\t * @param {object} oSvg The SVG DOM element (wrapped in a d3 selection).\n\t * @returns {void}\n\t */\n\tinitialize(oSvg) {\n\t\tlet oZoom,\n\t\t\t/** Updates the link, node and text positions after a force tick. @ignore */\n\t\t\tfnTick = () => {\n\t\t\t\toSvg.select(\"g.links\").selectAll(\"g.link\").selectAll(\"line\")\n\t\t\t\t\t.attr(\"x1\", d => d.source.x)\n\t\t\t\t\t.attr(\"y1\", d => d.source.y)\n\t\t\t\t\t.attr(\"x2\", d => d.target.x)\n\t\t\t\t\t.attr(\"y2\", d => d.target.y);\n\n\t\t\t\toSvg.select(\"g.links\").selectAll(\"g.link\").selectAll(\"text\")\n\t\t\t\t\t.attr(\"transform\",\n\t\t\t\t\td => \"translate(\" + (d.source.x + d.target.x) / 2 + \",\" + (d.source.y + d.target.y) / 2 + \")\"\n\t\t\t\t\t);\n\n\t\t\t\toSvg.select(\"g.nodes\").selectAll(\"g.node\")\n\t\t\t\t\t.attr(\"transform\", d => \"translate(\" + d.x + \",\" + d.y + \")\");\n\t\t\t};\n\n\t\tthis._force = d3.layout.force()\n\t\t\t.linkDistance(d => d.element.getLabel() ? 150 : 100)\n\t\t\t.charge(-200)\n\t\t\t.gravity(0.05)\n\t\t\t.on(\"tick\", fnTick);\n\n\t\tlet oG = this._g = oSvg.append(\"g\");\n\t\toG.append(\"g\").attr(\"class\", \"links\");\n\t\toG.append(\"g\").attr(\"class\", \"nodes\");\n\n\t\toSvg.append(\"svg:defs\")\n\t\t\t.append(\"svg:marker\")\n\t\t\t.attr(\"id\", \"arrow\")\n\t\t\t.attr(\"refX\", 7)\n\t\t\t.attr(\"refY\", 4.5)\n\t\t\t.attr(\"markerWidth\", 8)\n\t\t\t.attr(\"markerHeight\", 8)\n\t\t\t.attr(\"orient\", \"auto\")\n\t\t\t.append(\"svg:path\")\n\t\t\t.attr(\"class\", \"link\")\n\t\t\t.style(\"fill\", Parameters.get(\"sapButton_BorderColor\"))\n\t\t\t.attr(\"d\", \"M 0 7 L 3.5 4.5 L 0 2\");\n\n\t\toZoom = d3.behavior.zoom();\n\t\toSvg.call(oZoom.on(\"zoom\", () => {\n\t\t\toG.attr(\"transform\", \"translate(\" + d3.event.translate + \")\" + \" scale(\" + d3.event.scale + \")\");\n\t\t}));\n\t}\n\n\t/**\n\t * Transforms the data by selecting only the nodes which should be visible.\n\t * Builds links between these nodes based on the links aggregation.\n \t * @method spet.data.explorer.Graph#data\n\t * @private\n\t * @returns {object} The resulting nodes and links.\n\t */\n\tdata() {\n\t\tlet mNodes = {},\n\t\t\tmVisited,\n\t\t\tbDirected = this.getDirected(),\n\t\t\tmGraph = {},\n\t\t\taLinks = this.getLinks() || [],\n\t\t\taRoots = this.getOrigins() || [],\n\t\t\taNodes = this.getNodes() || [],\n\t\t\toResult = { nodes: [], links: [] },\n\n\t\t\t/**\n\t\t\t * Performs a BFS-like traversal to find the visible nodes.\n\t\t\t * @ignore\n\t\t\t * @param {spet.data.explorer.Node[]} \taNodes\t\tThe graph's nodes.\n\t\t\t * @param {spet.data.explorer.Node[]} \taOrigins\tThe graph's origins.\n\t\t\t * @param {object}\t\t\t\t\t\tmGraph\t\tThe adjacency matrix.\n\t\t\t * @returns {object} A map between the node's ID and a flag indicating if\n\t\t\t * the node was visited by the BFS.\n\t\t\t */\n\t\t\tfnBfs = (aNodes, aOrigins, mGraph) => {\n\t\t\t\tvar mVisited = {},\n\t\t\t\t\taQueue = aOrigins.slice(0),\n\t\t\t\t\toCurrent,\n\t\t\t\t\tsCurrent,\n\t\t\t\t\ti;\n\n\t\t\t\tfor (i = 0; i < aNodes.length; ++i) {\n\t\t\t\t\tmVisited[aNodes[i].getId()] = false;\n\t\t\t\t}\n\n\t\t\t\twhile (aQueue.length) {\n\t\t\t\t\toCurrent = aQueue.shift();\n\t\t\t\t\tsCurrent = oCurrent.getId();\n\t\t\t\t\tmVisited[sCurrent] = true;\n\t\t\t\t\tif (oCurrent.getExpanded()) {\n\t\t\t\t\t\tfor (i = 0; i < mGraph[sCurrent].length; ++i) {\n\t\t\t\t\t\t\tif (!mVisited[mGraph[sCurrent][i].getId()]) {\n\t\t\t\t\t\t\t\taQueue.push(mGraph[sCurrent][i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn mVisited;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Initializes the node map, adjacency matrix and root array.\n\t\t\t * @ignore\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tfnInitialize = () => {\n\t\t\t\tfor (var i = 0; i < aNodes.length; ++i) {\n\t\t\t\t\tmNodes[aNodes[i].getId()] = aNodes[i];\n\t\t\t\t\tmGraph[aNodes[i].getId()] = [];\n\t\t\t\t}\n\t\t\t\taRoots = aRoots.map(sRoot => mNodes[sRoot]).filter(oNode => !!oNode);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Builds the adjacency matrix.\n\t\t\t * @ignore\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tfnBuildGraph = () => {\n\t\t\t\tlet i;\n\t\t\t\tif (bDirected) {\n\t\t\t\t\tfor (i = 0; i < aLinks.length; ++i) {\n\t\t\t\t\t\tif (mNodes.hasOwnProperty(aLinks[i].getSource()) && mNodes.hasOwnProperty(aLinks[i].getTarget())) {\n\t\t\t\t\t\t\tmGraph[aLinks[i].getSource()].push(mNodes[aLinks[i].getTarget()]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (i = 0; i < aLinks.length; ++i) {\n\t\t\t\t\t\tif (mNodes.hasOwnProperty(aLinks[i].getSource()) && mNodes.hasOwnProperty(aLinks[i].getTarget())) {\n\t\t\t\t\t\t\tmGraph[aLinks[i].getSource()].push(mNodes[aLinks[i].getTarget()]);\n\t\t\t\t\t\t\tmGraph[aLinks[i].getTarget()].push(mNodes[aLinks[i].getSource()]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Builds the final result based on the \"visited\" map.\n\t\t\t * @ignore\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tfnMakeResult = () => {\n\t\t\t\tlet i;\n\t\t\t\tfor (i = 0; i < aNodes.length; ++i) {\n\t\t\t\t\tif (mVisited[aNodes[i].getId()]) {\n\t\t\t\t\t\toResult.nodes.push(aNodes[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (i = 0; i < aLinks.length; ++i) {\n\t\t\t\t\tif (mVisited[aLinks[i].getSource()] && mVisited[aLinks[i].getTarget()]) {\n\t\t\t\t\t\toResult.links.push({\n\t\t\t\t\t\t\tsource: mNodes[aLinks[i].getSource()],\n\t\t\t\t\t\t\ttarget: mNodes[aLinks[i].getTarget()],\n\t\t\t\t\t\t\telement: aLinks[i]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\tfnInitialize();\n\t\tfnBuildGraph();\n\t\tmVisited = fnBfs(aNodes, aRoots, mGraph);\n\t\tfnMakeResult();\n\n\t\treturn oResult;\n\t}\n\n\t/**\n\t * Draws the content on the SVG. This method should only be called manually after\n\t * an indirect size change was done (.e.g changing the size of the parent container).\n\t * @public\n\t * @method spet.data.explorer.Graph#draw\n\t * @returns {spet.data.explorer.Graph} this to allow chaining.\n\t */\n\tdraw() {\n\t\tlet oSvg = this.getAggregation(\"_html\").getDomRef();\n\n\t\tif (!oSvg || !oSvg.clientHeight || !oSvg.clientWidth) {\n\t\t\treturn this;\n\t\t}\n\n\t\tlet oLinks,\n\t\t\toNodes,\n\t\t\toArc = d3.svg.arc().innerRadius(2).outerRadius(4).startAngle(0).endAngle(Math.PI * 2 / 3);\n\n\t\t/**\n\t\t * Starts the update process by updaing the force layout and selecting the nodes and links.\n\t\t * @ignore\n\t\t * @returns {void}\n\t\t */\n\t\tlet fnStart = () => {\n\t\t\tlet oData = this.data();\n\t\t\tthis._size.height = oSvg.clientHeight;\n\t\t\tthis._size.width = oSvg.clientWidth;\n\t\t\toSvg = d3.select(oSvg);\n\n\t\t\tif (this._g === null) {\n\t\t\t\tthis.initialize(oSvg);\n\t\t\t\toSvg.style(\"background-color\", Parameters.get(\"sapBackgroundColor\"));\n\t\t\t}\n\n\t\t\tthis._force.size([this._size.width, this._size.height])\n\t\t\t\t.nodes(oData.nodes)\n\t\t\t\t.links(oData.links)\n\t\t\t\t.start();\n\n\t\t\toLinks = oSvg.select(\"g.links\")\n\t\t\t\t.selectAll(\"g.link\")\n\t\t\t\t.data(oData.links, d => d.target.getId() + \"-\" + d.source.getId());\n\n\t\t\toNodes = oSvg.select(\"g.nodes\")\n\t\t\t\t.selectAll(\"g.node\")\n\t\t\t\t.data(oData.nodes, d => d.getId());\n\t\t};\n\n\t\t/**\n\t\t * Updates, inserts and removes links.\n\t\t * @ignore\n\t\t * @returns {void}\n\t\t */\n\t\tlet fnLinks = () => {\n\t\t\t//update\n\t\t\toLinks.select(\"text\").text(d => d.element.getLabel());\n\n\t\t\t//enter\n\t\t\tlet oLinkg = oLinks.enter()\n\t\t\t\t.append(\"g\")\n\t\t\t\t.attr(\"class\", \"link\");\n\n\t\t\toLinkg.append(\"line\")\n\t\t\t\t.style(\"stroke-width\", Parameters.get(\"sapButton_BorderWidth\"))\n\t\t\t\t.style(\"stroke\", Parameters.get(\"sapButton_BorderColor\"));\n\n\t\t\toLinkg.append(\"text\")\n\t\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t\t.text(d => d.element.getLabel())\n\t\t\t\t.style(\"font\", Parameters.get(\"sapUiFontSmallSize\") + \" \" + Parameters.get(\"sapUiFontCondensedFamily\"))\n\t\t\t\t.style(\"color\", Parameters.get(\"sapTextColor\"))\n\t\t\t\t.attr({\n\t\t\t\t\t\"paint-order\": \"stroke\",\n\t\t\t\t\t\"stroke\": Parameters.get(\"sapBackgroundColor\"),\n\t\t\t\t\t\"stroke-width\": 2,\n\t\t\t\t\t\"stroke-linecap\": \"butt\",\n\t\t\t\t\t\"stroke-linejoin\": \"miter\"\n\t\t\t\t});\n\n\t\t\tif (this.getDirected()) {\n\t\t\t\toLinkg.filter(d => !d.target.getLabelOnly())\n\t\t\t\t\t.attr(\"marker-end\", \"url(#arrow)\");\n\t\t\t}\n\n\t\t\t//exit\n\t\t\toLinks.exit().remove();\n\t\t};\n\n\t\t/**\n\t\t * Tweens a full-circle rotation.\n\t\t * @ignore\n\t\t * @returns {void}\n\t\t */\n\t\tlet fnTween = () => {\n\t\t\tlet i = d3.interpolate(0, 360);\n\t\t\treturn t => \"rotate(\" + i(t) + \")\";\n\t\t};\n\n\t\t/**\n\t\t * Performs (recursively) a rotation animation loop.\n\t\t * @ignore\n\t\t * @returns {void}\n\t\t */\n\t\tlet fnRotate = function() {\n\t\t\t(this.transition ? this : d3.select(this))\n\t\t\t\t.filter(d => d.getBusy())\n\t\t\t\t.transition()\n\t\t\t\t.duration(2000)\n\t\t\t\t.ease(\"linear\")\n\t\t\t\t.attrTween(\"transform\", fnTween)\n\t\t\t\t.each(\"end\", fnRotate);\n\t\t};\n\n\t\t/**\n\t\t * Updates, inserts and removes nodes.\n\t\t * @ignore\n\t\t * @returns {void}\n\t\t */\n\t\tlet fnNodes = () => {\n\t\t\t//update\n\t\t\toNodes.select(\"circle\")\n\t\t\t\t.style(\"fill\", d => Parameters.get(d.getExpanded() ? \"sapBackgroundColor\" : \"sapSelectedColor\"));\n\n\t\t\toNodes.select(\"text\")\n\t\t\t\t.attr(\"dy\", d => d.getLabelOnly() ? 0 : 7)\n\t\t\t\t.attr(\"alignment-baseline\", d => d.getLabelOnly() ? \"middle\" : \"hanging\")\n\t\t\t\t.text(d => d.getLabel());\n\n\t\t\toNodes.select(\"title\")\n\t\t\t\t.text(d => d.getTooltip());\n\n\t\t\toNodes.filter(d => !d.getBusy())\n\t\t\t\t.selectAll(\"path.busy\")\n\t\t\t\t.remove();\n\n\t\t\toNodes.filter(function(d) {\n\t\t\t\t\treturn d.getBusy() && d3.select(this).selectAll(\"path.busy\").empty();\n\t\t\t\t}).append(\"path\")\n\t\t\t\t.attr(\"d\", oArc)\n\t\t\t\t.attr(\"class\", \"busy\")\n\t\t\t\t.attr(\"fill\", Parameters.get(\"sapSelectedColor\"))\n\t\t\t\t.call(fnRotate);\n\n\t\t\t//enter\n\t\t\tlet oNodeg = oNodes.enter().append(\"g\")\n\t\t\t\t.attr(\"class\", \"node\")\n\t\t\t\t.on(\"mousedown\", () => d3.event.stopPropagation())\n\t\t\t\t.on(\"click\", d => {\n\t\t\t\t\tif (!d3.event.defaultPrevented && !d.getLabelOnly() && d.getExpandable() && !d.getBusy()) {\n\t\t\t\t\t\td.setExpanded(!d.getExpanded());\n\t\t\t\t\t\td.fireEvent(\"expand\");\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"contextmenu\", function(d) {\n\t\t\t\t\td.fireEvent(\"detail\", {dom: this});\n\t\t\t\t\td3.event.preventDefault();\n\t\t\t\t})\n\t\t\t\t.call(this._force.drag);\n\n\t\t\toNodeg.filter(d => !d.getLabelOnly())\n\t\t\t\t.append(\"circle\")\n\t\t\t\t.style(\"fill\", d => Parameters.get(d.getExpanded() ? \"sapBackgroundColor\" : \"sapSelectedColor\"))\n\t\t\t\t.style(\"stroke\", Parameters.get(\"sapButton_BorderColor\"))\n\t\t\t\t.style(\"stroke-width\", Parameters.get(\"sapButton_BorderWidth\"))\n\t\t\t\t.attr(\"r\", 4.5);\n\n\t\t\toNodeg.append(\"text\")\n\t\t\t\t.attr(\"dy\", d => d.getLabelOnly() ? 0 : 7)\n\t\t\t\t.attr(\"alignment-baseline\", d => d.getLabelOnly() ? \"middle\" : \"hanging\")\n\t\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t\t.text(d => d.getLabel())\n\t\t\t\t.style(\"font\", Parameters.get(\"sapUiFontSmallSize\") + \" \" + Parameters.get(\"sapUiFontCondensedFamily\"))\n\t\t\t\t.style(\"color\", Parameters.get(\"sapTextColor\"))\n\t\t\t\t.attr({\n\t\t\t\t\t\"paint-order\": \"stroke\",\n\t\t\t\t\t\"stroke\": Parameters.get(\"sapBackgroundColor\"),\n\t\t\t\t\t\"stroke-width\": 2,\n\t\t\t\t\t\"stroke-linecap\": \"butt\",\n\t\t\t\t\t\"stroke-linejoin\": \"miter\"\n\t\t\t\t});\n\n\t\t\toNodeg.append(\"title\")\n\t\t\t\t.text(d => d.getTooltip());\n\n\t\t\toNodeg.filter(d => d.getBusy())\n\t\t\t\t.append(\"path\")\n\t\t\t\t.attr(\"d\", oArc)\n\t\t\t\t.attr(\"class\", \"busy\")\n\t\t\t\t.attr(\"fill\", Parameters.get(\"sapSelectedColor\"))\n\t\t\t\t.call(fnRotate);\n\n\t\t\toNodes.exit().remove();\n\t\t};\n\n\t\tfnStart();\n\t\tfnLinks();\n\t\tfnNodes();\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * The renderer of the control. Wraps the SVG inside a DIV.\n\t * @ignore\n\t * @param {sap.ui.core.RenderManager} oRM The render manager.\n\t * @param {sap.ui.core.Control} oControl The graph.\n\t * @returns {void}\n\t */\n\trenderer(oRM, oControl) {\n\t\toRM.write(\"<div\");\n\t\toRM.writeControlData(oControl);\n\t\toRM.addStyle(\"height\", oControl.getHeight());\n\t\toRM.addStyle(\"width\", oControl.getWidth());\n\t\toRM.writeStyles();\n\t\toRM.write(\">\");\n\t\toRM.renderControl(oControl.getAggregation(\"_html\"));\n\t\toRM.write(\"</div>\");\n\t}\n}"]}